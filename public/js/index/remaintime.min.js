/**
 * Created by =.= on 2017-11-02. v1.0
 *
 * 暂时只有定时器功能
 */
;(function ($) {
    $.fn.extend({
        remaintime: function (option) {
            var defaults = {
                time: option.time, //倒计时的秒数
                start_time: option.start_time, //活动开始时间
                end_time: option.end_time, //活动结束时间
                now_time: option.now_time, //当前时间
                day: this.find('' + option.day + ''), //天
                hourse: this.find('' + option.hourse + ''), //小时
                minute: this.find('' + option.minute + ''), //分钟
                second: this.find('' + option.second + ''), //秒
                parent: $(option.parent), //点击切换的父元素
                content: $(option.content), //切换的内容
                Boolean: option.Boolean,
                other: option.other //自定义方法
            };
            var o = $.extend(defaults, option);
            var dsq;
            this.each(function () {
                var _this = this;
                $(document).ready(function () {
                    remaintime();
                    djs = window.setInterval(remaintime, 1000);
                })

                function remaintime() {
                    if (o.other != undefined) {
                        o.other(o.time, o.hourse, o.minute, o.second, o.day, o.parent, o.content, o.Boolean, o.start_time, o.end_time, o.now_time); //执行自定义方法
                    }
                    o.time--;
                    var s = Math.floor(o.time % 60), // 计算秒
                        m = Math.floor((o.time / 60) % 60), //计算分
                        d = Math.floor(o.time / 86400), //计算天
                        h;
                    if (typeof o.day == "string") {
                        h = Math.floor((o.time / 3600) % 24); //当有天的时候计算小时
                        $("." + _this.className + " " + o.day).html(d);
                    } else {
                        h = Math.floor(o.time / 3600); //当没有天的时候计算小时
                    }
                    if (o.Boolean == true) {
                        if (o.time <= 0) {
                            clearInterval(djs);
                        }
                    }
                    $("." + _this.className + " " + o.hourse).html(h);
                    $("." + _this.className + " " + o.minute).html(m);
                    $("." + _this.className + " " + o.second).html(s);
                }

            })

        }
    })
})(jQuery)