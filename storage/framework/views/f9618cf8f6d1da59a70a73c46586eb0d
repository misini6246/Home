
<?php $__env->startSection('links'); ?>
    <link href="<?php echo e(path('css/jf/common.css')); ?>" rel="stylesheet" type="text/css"/>
    <link href="<?php echo e(path('css/jf/shouhuodizhi.css')); ?>" rel="stylesheet" type="text/css"/>
    <script src="<?php echo e(path('js/jf/lb.js')); ?>" type="text/javascript" charset="utf-8"></script>
<?php $__env->stopSection(); ?>
<?php $__env->startSection('content'); ?>
    <?php echo $__env->make('jf.layouts.header', array_except(get_defined_vars(), array('__data', '__path')))->render(); ?>
    <?php echo $__env->make('jf.layouts.nav', array_except(get_defined_vars(), array('__data', '__path')))->render(); ?>
    <!--container-->
    <div class="container content">
        <div class="content_box">
            <div class="top_title">
                <img src="<?php echo e(get_img_path('images/jf/address_03.png')); ?>"/>
                <span>当前位置：<a href="<?php echo e(route('index')); ?>">积分首页</a> > <a href="<?php echo e(route('jf.index')); ?>">个人中心</a>> 收货地址</span>
            </div>
            <div class="vip">
                <?php echo $__env->make('jf.layouts.user_menu', array_except(get_defined_vars(), array('__data', '__path')))->render(); ?>
                <div class="vip_right">
                    <div class="vip_right_title">
                        <img src="<?php echo e(get_img_path('images/jf/dian_03.png')); ?>"/>
                        <span>收货地址</span>
                    </div>
                    <div class="add_box">
                        <ul class="add_list">
                            <?php foreach($result as $v): ?>
                                <li <?php if($v->is_default==1): ?>class="active" <?php endif; ?> id="address<?php echo e($v->id); ?>">
                                    <div class="username">
                                        <img src="<?php echo e(get_img_path('images/jf/user_icon.png')); ?>"/>
                                        <span><?php echo e($v->true_name); ?></span>
                                    </div>
                                    <div class="user_phone">
                                        <img src="<?php echo e(get_img_path('images/jf/phone_icon.png')); ?>"/>
                                        <span><?php echo e($v->mob_phone); ?></span>
                                    </div>
                                    <div class="user_add">
                                        <img src="<?php echo e(get_img_path('images/jf/add_icon.png')); ?>"/>
                                        <span><?php echo e($v->location); ?><?php echo e($v->address); ?></span>
                                    </div>
                                    <img src="<?php echo e(get_img_path('images/jf/add_choose.png')); ?>" class="add_choose"/>
                                    <div class="moren">
                                        默认地址
                                    </div>
                                    <div class="set">
										<span class="shezhi" onclick="set_default(<?php echo e($v->id); ?>)">
											设为默认
										</span>
                                        <span class="xiugai"
                                              onclick="load_html('<?php echo e(route('jf.address.edit',['id'=>$v->id])); ?>','修改收货地址')">
											修改
										</span>
                                        <?php if($v->is_default==0): ?>
                                            <span class="xiugai" onclick="del('确定删除该收货地址?','<?php echo e($v->id); ?>')">
											删除
										    </span>
                                        <?php endif; ?>
                                    </div>
                                </li>
                            <?php endforeach; ?>
                            <?php if(count($result)<5): ?>
                                <li class="zengjia" onclick="load_html('<?php echo e(route('jf.address.create')); ?>','新增收货地址')">
                                    <div class="add_add">
                                        <img src="<?php echo e(get_img_path('images/jf/add_add.jpg')); ?>"/>
                                        <span>新增收货地址</span>
                                    </div>
                                </li>
                            <?php endif; ?>
                        </ul>
                    </div>
                </div>
                <?php echo $__env->make('jf.layouts.wntj', array_except(get_defined_vars(), array('__data', '__path')))->render(); ?>
            </div>
        </div>
    </div>
    <!--container-->
    <?php echo $__env->make('jf.layouts.footer', array_except(get_defined_vars(), array('__data', '__path')))->render(); ?>
    <script type="text/javascript">
        $(function () {
            $('.xiugai').on('click', function () {
                //获取修改地址的资料

                $('.add_address_title').html("修改收货地址")
                $('.add_address').show();
            })
            $('.zengjia').on('click', function () {
                $('.add_address_title').html("新增收货地址")
                $('.add_address').show();
            })
            $('.bc,.qx').click(close)
            function close() {
                return $('.add_address').hide();
            }
        })
        function del(msg, id) {
            layer.confirm(msg, function () {
                $.ajax({
                    url: '/jf/address/' + id,
                    type: 'delete',
                    dataType: 'json',
                    success: function (data) {
                        layer.msg(data.msg, {icon: data.error + 1});
                        if (data.error == 0) {
                            $('#address' + id).remove();
                        }
                    }
                })
            })
        }
        function load_html(url, title) {
            layer.open({
                type: 2,
                title: title,
                shadeClose: true,
                shade: 0.4,
                area: ['800px', '500px'],
                content: url
            });
        }
        function set_default(id) {
            $.ajax({
                url: '/jf/address/set_default',
                data: {id: id},
                dataType: 'json',
                success: function (data) {
                    if (data.error == 0) {
                        $('#address' + data.id).addClass('active').siblings().removeClass('active');
                    } else {
                        layer.msg(data.msg, {icon: data.error + 1})
                    }
                }
            })
        }
    </script>
<?php $__env->stopSection(); ?>

<?php echo $__env->make('jf.layouts.body', array_except(get_defined_vars(), array('__data', '__path')))->render(); ?>